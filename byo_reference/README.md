# ①課題名
BYOワイン会・持ち寄りボトル登録アプリ（PHP版アンケート）

## ②課題内容（どんな作品か）

- 「すでに開催が決まっているワイン会」の **持ち寄りワイン情報だけ** を事前に集めるための軽量Webアプリ。
- 参加者はURLにアクセスして、自分の持ち寄りボトルをフォームから登録する。
- アプリ側では、ワインの **タイプ（泡・白・赤など）／価格帯／テーマ適合度** を構造化して保存。
- 参加者は「1枚の Wine List」として、当日のラインナップの雰囲気をブラインド付きで確認できる。
- 幹事は別画面（幹事ビュー）から、タイプや価格帯のバランス、テーマ適合度の平均などを確認し、事前に微調整ができる。

※ 本アプリは「日程調整／店探し／出欠管理」は扱わず、  
　**開催確定後の BYO 調整だけに特化** している。

---

## ③アプリのデプロイURL

- ローカル開発環境：`http://localhost/BYO/`  
- 本番デプロイ（予定）：未定

---

## ④アプリのログイン用IDまたはPassword（ある場合）

現バージョン（v1）はログイン機能なし。  
- 参加者：URLを知っていれば誰でも登録可能  
- 幹事ビュー：`host_list.php` に直接アクセスする前提  
  （今後、簡易ログイン or パスワード保護を検討）

---

## ⑤工夫した点・こだわった点

- **BYOワイン会という具体的なユースケースに特化**
  - 既存の「なんでもアンケート」ではなく、
    「泡／白／赤／価格帯／テーマ適合度」を事前に可視化することに全振り。
  - 日程・出欠・店探しなどは他ツールに任せることで、アプリの性格を明確化。

- **項目ごとのブラインド設定**
  - 生産者／ワイン名／ヴィンテージ／産地／価格帯／コメントごとに
    「表示させたくない（ブラインド希望）」チェックを用意。
  - 参加者ビューでは `??? / XXXX / （非公開）` にマスクして表示。
  - 幹事ビューでも「登録者名・タイプ・テーマ適合度」以外はブラインド指定どおり伏せる仕様にして、
    ブラインド会でも幹事だけが一人勝ちしないよう配慮。

- **1枚の Wine List（メーカーズディナー風レイアウト）**
  - 無機質な `<table>` ではなく、A4紙1枚に印刷することを想定した
    「番号付きテキスト行のワインリスト」で表示。
  - 例）  
    `1. Producer – Cuvée – Vintage`  
    `   Region / Type / Price: Prestige / by Shinjiさん`
  - そのまま印刷すればメニュー表として使えるデザインに寄せた。

- **価格帯は「レンジ＋ニックネーム」で数字をぼかす**
  - 価格帯は自己申告で  
    `〜5千円 / 5〜10千円 / 10〜20千円 / 20〜50千円 / 50千円以上` を選択。
  - DBには `charming / reasonable / valuable / expensive / prestige` として保存し、
    参加者向けリストでは「Price: Prestige」のようにニックネームだけ表示。
  - 「あまり生々しい金額は出したくないけど、大きなミスマッチは避けたい」
    というワイン会の心理に合わせた。

- **フォームは“BYOあるある”を反映した入力設計**
  - ヴィンテージ：`NV / 1970年以前 / 1971〜2025（若い年が上に並ぶ）`
  - 産地：代表的な地域のプルダウン＋「その他」自由入力。
  - タイプ：`sparkling / white / orange / red_pinot / red_other / rose / sweet / fortified`
    という現場感のあるカテゴリ。
  - テーマ適合度：1〜5の自己評価（幹事のバランス調整用）。

- **将来の編集・ブラインド解除に備えたパスワード設計**
  - 登録時に任意の「編集／ブラインド解除用パスワード」を登録可能。
  - DBには `blind_password_hash` としてハッシュ保存しており、
    v2 以降で「自分のエントリーを修正／取消」「ブラインド解除」機能に使える構造にしてある。

---

## ⑥難しかった点・次に実装したいこと

- **難しかった点**
  - テーブル設計：
    - `bottle_entries` に「実データ」と「ブラインドフラグ」をどう共存させるか整理するのに時間がかかった。
    - 将来のログイン機能や編集機能を見据えて、`blind_password_hash` など拡張用のカラムも先に用意した。
  - ブラインド表示ロジック：
    - 参加者ビュー・幹事ビューで「どの項目を誰に見せるか」のルールを整理したうえで、
      `list.php` と `host_list.php` でそれぞれマスク処理を実装する必要があった。
  - 「表ではない」リスト表示：
    - A4の紙1枚を意識した時に、どの情報を1行目／2行目／3行目に載せるか、
      文字数と情報量のバランスを取るのが意外と難しかった。

- **次に実装したいこと（v2以降）**
  - 参加者による自分のエントリーの修正・取消機能  
    （編集パスワードを使った `edit_entry.php` ＋ UPDATE / 論理削除）
  - 幹事専用ログイン：
    - 簡易パスワード or セッションを使って `host_list.php` を保護する。
  - イベントの複数管理：
    - 現状は `event_id = 1` 固定だが、将来的には `events` テーブルを作り、
      幹事が複数のワイン会を作成・管理できるようにする。
  - スマホビューの微調整：
    - すでに `meta viewport` 対応済だが、
      スマホでのフォントサイズ・余白などをさらに整えて読みやすくする。
